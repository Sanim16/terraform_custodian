policies:
  - name: offhours-stop-ec2-extended
    resource: ec2
    filters:
      - "tag:CustodianOffHours": Extended hours     # match tag + value
      - type: offhour
        tag: CustodianOffHours       # tag that contains the offhour schedule
        default_tz: gmt
        offhour: 21
        weekends: false
    actions:
      - stop

  - name: onhours-stop-ec2-extended
    resource: ec2
    filters:
      - "tag:CustodianOffHours": Extended hours     # match tag + value
      - type: onhour
        tag: CustodianOffHours       # tag that contains the offhour schedule
        default_tz: gmt
        onhour: 05
        weekends: false
    actions:
      - start

  - name: offhours-stop-ec2-default
    resource: ec2
    filters:
      - "tag:CustodianOffHours": Default     # match tag + value
      - type: offhour
        tag: CustodianOffHours       # tag that contains the offhour schedule
        default_tz: gmt
        offhour: 19
        weekends: false
    actions:
      - stop

  - name: onhours-stop-ec2-default
    resource: ec2
    filters:
      - "tag:CustodianOffHours": Default     # match tag + value
      - type: onhour
        tag: CustodianOffHours       # tag that contains the offhour schedule
        default_tz: gmt
        onhour: 07
        weekends: false
    actions:
      - start

  - name: offhours-stop-asg-default
    resource: asg
    filters:
       - "tag:CustodianOffHours": Default
       - type: offhour
         tag: CustodianOffHours
         default_tz: gmt
         offhour: 19
         weekends: false
    actions:
      - suspend

  - name: offhours-start-asg-default
    resource: asg
    filters:
      - "tag:CustodianOffHours": Default
      - type: onhour
        tag: CustodianOffHours
        default_tz: gmt
        onhour: 07
        weekends: false
    actions:
      - resume

  - name: offhours-stop-rds
    resource: rds
    filters:
       - "tag:CustodianOffHours": Default
       - type: offhour
         tag: CustodianOffHours
         default_tz: gmt
         offhour: 19
         weekends: false
    actions:
      - stop

  - name: offhours-start-rds
    resource: rds
    filters:
      - "tag:CustodianOffHours": Default
      - type: onhour
        tag: CustodianOffHours
        default_tz: gmt
        onhour: 07
        weekends: false
    actions:
      - start
